def lintTask = project.tasks.create('lintGradle')

project.tasks.whenTaskAdded { task ->
    if (task != lintTask) {
        task.finalizedBy lintTask
    }
}

task someTaskThatGenerateJavaResources {}

def task = tasks.create("someTaskThatFinalizeJavaTestTask")
subprojects { project ->
    project.tasks.withType(Test) { Test testTask ->
        testTask.finalizedBy task
    }
}
